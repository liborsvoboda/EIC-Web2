{"version":3,"file":"7089.js","mappings":"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","sources":["webpack://demo/../../node_modules/monaco-editor/esm/vs/base/common/collections.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/base/common/severity.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/editor/common/services/model.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/platform/jsonschemas/common/jsonContributionRegistry.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/platform/markers/common/markers.js","webpack://demo/../../node_modules/monaco-editor/esm/vs/platform/registry/common/platform.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function diffSets(before, after) {\n    const removed = [];\n    const added = [];\n    for (const element of before) {\n        if (!after.has(element)) {\n            removed.push(element);\n        }\n    }\n    for (const element of after) {\n        if (!before.has(element)) {\n            added.push(element);\n        }\n    }\n    return { removed, added };\n}\n/**\n * Computes the intersection of two sets.\n *\n * @param setA - The first set.\n * @param setB - The second iterable.\n * @returns A new set containing the elements that are in both `setA` and `setB`.\n */\nexport function intersection(setA, setB) {\n    const result = new Set();\n    for (const elem of setB) {\n        if (setA.has(elem)) {\n            result.add(elem);\n        }\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from './strings.js';\nvar Severity;\n(function (Severity) {\n    Severity[Severity[\"Ignore\"] = 0] = \"Ignore\";\n    Severity[Severity[\"Info\"] = 1] = \"Info\";\n    Severity[Severity[\"Warning\"] = 2] = \"Warning\";\n    Severity[Severity[\"Error\"] = 3] = \"Error\";\n})(Severity || (Severity = {}));\n(function (Severity) {\n    const _error = 'error';\n    const _warning = 'warning';\n    const _warn = 'warn';\n    const _info = 'info';\n    const _ignore = 'ignore';\n    /**\n     * Parses 'error', 'warning', 'warn', 'info' in call casings\n     * and falls back to ignore.\n     */\n    function fromValue(value) {\n        if (!value) {\n            return Severity.Ignore;\n        }\n        if (strings.equalsIgnoreCase(_error, value)) {\n            return Severity.Error;\n        }\n        if (strings.equalsIgnoreCase(_warning, value) || strings.equalsIgnoreCase(_warn, value)) {\n            return Severity.Warning;\n        }\n        if (strings.equalsIgnoreCase(_info, value)) {\n            return Severity.Info;\n        }\n        return Severity.Ignore;\n    }\n    Severity.fromValue = fromValue;\n    function toString(severity) {\n        switch (severity) {\n            case Severity.Error: return _error;\n            case Severity.Warning: return _warning;\n            case Severity.Info: return _info;\n            default: return _ignore;\n        }\n    }\n    Severity.toString = toString;\n})(Severity || (Severity = {}));\nexport default Severity;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { OverviewRulerLane } from '../model.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../core/editorColorRegistry.js';\nimport { IModelService } from './model.js';\nimport { Range } from '../core/range.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { minimapInfo, minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\nimport { BidirectionalMap, ResourceMap } from '../../../base/common/map.js';\nimport { diffSets } from '../../../base/common/collections.js';\nlet MarkerDecorationsService = class MarkerDecorationsService extends Disposable {\n    constructor(modelService, _markerService) {\n        super();\n        this._markerService = _markerService;\n        this._onDidChangeMarker = this._register(new Emitter());\n        this._markerDecorations = new ResourceMap();\n        modelService.getModels().forEach(model => this._onModelAdded(model));\n        this._register(modelService.onModelAdded(this._onModelAdded, this));\n        this._register(modelService.onModelRemoved(this._onModelRemoved, this));\n        this._register(this._markerService.onMarkerChanged(this._handleMarkerChange, this));\n    }\n    dispose() {\n        super.dispose();\n        this._markerDecorations.forEach(value => value.dispose());\n        this._markerDecorations.clear();\n    }\n    getMarker(uri, decoration) {\n        const markerDecorations = this._markerDecorations.get(uri);\n        return markerDecorations ? (markerDecorations.getMarker(decoration) || null) : null;\n    }\n    _handleMarkerChange(changedResources) {\n        changedResources.forEach((resource) => {\n            const markerDecorations = this._markerDecorations.get(resource);\n            if (markerDecorations) {\n                this._updateDecorations(markerDecorations);\n            }\n        });\n    }\n    _onModelAdded(model) {\n        const markerDecorations = new MarkerDecorations(model);\n        this._markerDecorations.set(model.uri, markerDecorations);\n        this._updateDecorations(markerDecorations);\n    }\n    _onModelRemoved(model) {\n        const markerDecorations = this._markerDecorations.get(model.uri);\n        if (markerDecorations) {\n            markerDecorations.dispose();\n            this._markerDecorations.delete(model.uri);\n        }\n        // clean up markers for internal, transient models\n        if (model.uri.scheme === Schemas.inMemory\n            || model.uri.scheme === Schemas.internal\n            || model.uri.scheme === Schemas.vscode) {\n            this._markerService?.read({ resource: model.uri }).map(marker => marker.owner).forEach(owner => this._markerService.remove(owner, [model.uri]));\n        }\n    }\n    _updateDecorations(markerDecorations) {\n        // Limit to the first 500 errors/warnings\n        const markers = this._markerService.read({ resource: markerDecorations.model.uri, take: 500 });\n        if (markerDecorations.update(markers)) {\n            this._onDidChangeMarker.fire(markerDecorations.model);\n        }\n    }\n};\nMarkerDecorationsService = __decorate([\n    __param(0, IModelService),\n    __param(1, IMarkerService)\n], MarkerDecorationsService);\nexport { MarkerDecorationsService };\nclass MarkerDecorations extends Disposable {\n    constructor(model) {\n        super();\n        this.model = model;\n        this._map = new BidirectionalMap();\n        this._register(toDisposable(() => {\n            this.model.deltaDecorations([...this._map.values()], []);\n            this._map.clear();\n        }));\n    }\n    update(markers) {\n        // We use the fact that marker instances are not recreated when different owners\n        // update. So we can compare references to find out what changed since the last update.\n        const { added, removed } = diffSets(new Set(this._map.keys()), new Set(markers));\n        if (added.length === 0 && removed.length === 0) {\n            return false;\n        }\n        const oldIds = removed.map(marker => this._map.get(marker));\n        const newDecorations = added.map(marker => {\n            return {\n                range: this._createDecorationRange(this.model, marker),\n                options: this._createDecorationOption(marker)\n            };\n        });\n        const ids = this.model.deltaDecorations(oldIds, newDecorations);\n        for (const removedMarker of removed) {\n            this._map.delete(removedMarker);\n        }\n        for (let index = 0; index < ids.length; index++) {\n            this._map.set(added[index], ids[index]);\n        }\n        return true;\n    }\n    getMarker(decoration) {\n        return this._map.getKey(decoration.id);\n    }\n    _createDecorationRange(model, rawMarker) {\n        let ret = Range.lift(rawMarker);\n        if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1 /* MarkerTag.Unnecessary */) && !this._hasMarkerTag(rawMarker, 2 /* MarkerTag.Deprecated */)) {\n            // * never render hints on multiple lines\n            // * make enough space for three dots\n            ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\n        }\n        ret = model.validateRange(ret);\n        if (ret.isEmpty()) {\n            const maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) ||\n                model.getLineMaxColumn(ret.startLineNumber);\n            if (maxColumn === 1 || ret.endColumn >= maxColumn) {\n                // empty line or behind eol\n                // keep the range as is, it will be rendered 1ch wide\n                return ret;\n            }\n            const word = model.getWordAtPosition(ret.getStartPosition());\n            if (word) {\n                ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\n            }\n        }\n        else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\n            const minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\n            if (minColumn < ret.endColumn) {\n                ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\n                rawMarker.startColumn = minColumn;\n            }\n        }\n        return ret;\n    }\n    _createDecorationOption(marker) {\n        let className;\n        let color = undefined;\n        let zIndex;\n        let inlineClassName = undefined;\n        let minimap;\n        switch (marker.severity) {\n            case MarkerSeverity.Hint:\n                if (this._hasMarkerTag(marker, 2 /* MarkerTag.Deprecated */)) {\n                    className = undefined;\n                }\n                else if (this._hasMarkerTag(marker, 1 /* MarkerTag.Unnecessary */)) {\n                    className = \"squiggly-unnecessary\" /* ClassName.EditorUnnecessaryDecoration */;\n                }\n                else {\n                    className = \"squiggly-hint\" /* ClassName.EditorHintDecoration */;\n                }\n                zIndex = 0;\n                break;\n            case MarkerSeverity.Info:\n                className = \"squiggly-info\" /* ClassName.EditorInfoDecoration */;\n                color = themeColorFromId(overviewRulerInfo);\n                zIndex = 10;\n                minimap = {\n                    color: themeColorFromId(minimapInfo),\n                    position: 1 /* MinimapPosition.Inline */\n                };\n                break;\n            case MarkerSeverity.Warning:\n                className = \"squiggly-warning\" /* ClassName.EditorWarningDecoration */;\n                color = themeColorFromId(overviewRulerWarning);\n                zIndex = 20;\n                minimap = {\n                    color: themeColorFromId(minimapWarning),\n                    position: 1 /* MinimapPosition.Inline */\n                };\n                break;\n            case MarkerSeverity.Error:\n            default:\n                className = \"squiggly-error\" /* ClassName.EditorErrorDecoration */;\n                color = themeColorFromId(overviewRulerError);\n                zIndex = 30;\n                minimap = {\n                    color: themeColorFromId(minimapError),\n                    position: 1 /* MinimapPosition.Inline */\n                };\n                break;\n        }\n        if (marker.tags) {\n            if (marker.tags.indexOf(1 /* MarkerTag.Unnecessary */) !== -1) {\n                inlineClassName = \"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */;\n            }\n            if (marker.tags.indexOf(2 /* MarkerTag.Deprecated */) !== -1) {\n                inlineClassName = \"squiggly-inline-deprecated\" /* ClassName.EditorDeprecatedInlineDecoration */;\n            }\n        }\n        return {\n            description: 'marker-decoration',\n            stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n            className,\n            showIfCollapsed: true,\n            overviewRuler: {\n                color,\n                position: OverviewRulerLane.Right\n            },\n            minimap,\n            zIndex,\n            inlineClassName,\n        };\n    }\n    _hasMarkerTag(marker, tag) {\n        if (marker.tags) {\n            return marker.tags.indexOf(tag) >= 0;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IModelService = createDecorator('modelService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// ------ internal util\nexport var _util;\n(function (_util) {\n    _util.serviceIds = new Map();\n    _util.DI_TARGET = '$di$target';\n    _util.DI_DEPENDENCIES = '$di$dependencies';\n    function getServiceDependencies(ctor) {\n        return ctor[_util.DI_DEPENDENCIES] || [];\n    }\n    _util.getServiceDependencies = getServiceDependencies;\n})(_util || (_util = {}));\nexport const IInstantiationService = createDecorator('instantiationService');\nfunction storeServiceDependency(id, target, index) {\n    if (target[_util.DI_TARGET] === target) {\n        target[_util.DI_DEPENDENCIES].push({ id, index });\n    }\n    else {\n        target[_util.DI_DEPENDENCIES] = [{ id, index }];\n        target[_util.DI_TARGET] = target;\n    }\n}\n/**\n * The *only* valid way to create a {{ServiceIdentifier}}.\n */\nexport function createDecorator(serviceId) {\n    if (_util.serviceIds.has(serviceId)) {\n        return _util.serviceIds.get(serviceId);\n    }\n    const id = function (target, key, index) {\n        if (arguments.length !== 3) {\n            throw new Error('@IServiceName-decorator can only be used to decorate a parameter');\n        }\n        storeServiceDependency(id, target, index);\n    };\n    id.toString = () => serviceId;\n    _util.serviceIds.set(serviceId, id);\n    return id;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport * as platform from '../../registry/common/platform.js';\nexport const Extensions = {\n    JSONContribution: 'base.contributions.json'\n};\nfunction normalizeId(id) {\n    if (id.length > 0 && id.charAt(id.length - 1) === '#') {\n        return id.substring(0, id.length - 1);\n    }\n    return id;\n}\nclass JSONContributionRegistry {\n    constructor() {\n        this._onDidChangeSchema = new Emitter();\n        this.schemasById = {};\n    }\n    registerSchema(uri, unresolvedSchemaContent) {\n        this.schemasById[normalizeId(uri)] = unresolvedSchemaContent;\n        this._onDidChangeSchema.fire(uri);\n    }\n    notifySchemaChanged(uri) {\n        this._onDidChangeSchema.fire(uri);\n    }\n}\nconst jsonContributionRegistry = new JSONContributionRegistry();\nplatform.Registry.add(Extensions.JSONContribution, jsonContributionRegistry);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport Severity from '../../../base/common/severity.js';\nimport { localize } from '../../../nls.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport var MarkerSeverity;\n(function (MarkerSeverity) {\n    MarkerSeverity[MarkerSeverity[\"Hint\"] = 1] = \"Hint\";\n    MarkerSeverity[MarkerSeverity[\"Info\"] = 2] = \"Info\";\n    MarkerSeverity[MarkerSeverity[\"Warning\"] = 4] = \"Warning\";\n    MarkerSeverity[MarkerSeverity[\"Error\"] = 8] = \"Error\";\n})(MarkerSeverity || (MarkerSeverity = {}));\n(function (MarkerSeverity) {\n    function compare(a, b) {\n        return b - a;\n    }\n    MarkerSeverity.compare = compare;\n    const _displayStrings = Object.create(null);\n    _displayStrings[MarkerSeverity.Error] = localize('sev.error', \"Error\");\n    _displayStrings[MarkerSeverity.Warning] = localize('sev.warning', \"Warning\");\n    _displayStrings[MarkerSeverity.Info] = localize('sev.info', \"Info\");\n    function toString(a) {\n        return _displayStrings[a] || '';\n    }\n    MarkerSeverity.toString = toString;\n    function fromSeverity(severity) {\n        switch (severity) {\n            case Severity.Error: return MarkerSeverity.Error;\n            case Severity.Warning: return MarkerSeverity.Warning;\n            case Severity.Info: return MarkerSeverity.Info;\n            case Severity.Ignore: return MarkerSeverity.Hint;\n        }\n    }\n    MarkerSeverity.fromSeverity = fromSeverity;\n    function toSeverity(severity) {\n        switch (severity) {\n            case MarkerSeverity.Error: return Severity.Error;\n            case MarkerSeverity.Warning: return Severity.Warning;\n            case MarkerSeverity.Info: return Severity.Info;\n            case MarkerSeverity.Hint: return Severity.Ignore;\n        }\n    }\n    MarkerSeverity.toSeverity = toSeverity;\n})(MarkerSeverity || (MarkerSeverity = {}));\nexport var IMarkerData;\n(function (IMarkerData) {\n    const emptyString = '';\n    function makeKey(markerData) {\n        return makeKeyOptionalMessage(markerData, true);\n    }\n    IMarkerData.makeKey = makeKey;\n    function makeKeyOptionalMessage(markerData, useMessage) {\n        const result = [emptyString];\n        if (markerData.source) {\n            result.push(markerData.source.replace('¦', '\\\\¦'));\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.code) {\n            if (typeof markerData.code === 'string') {\n                result.push(markerData.code.replace('¦', '\\\\¦'));\n            }\n            else {\n                result.push(markerData.code.value.replace('¦', '\\\\¦'));\n            }\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.severity !== undefined && markerData.severity !== null) {\n            result.push(MarkerSeverity.toString(markerData.severity));\n        }\n        else {\n            result.push(emptyString);\n        }\n        // Modifed to not include the message as part of the marker key to work around\n        // https://github.com/microsoft/vscode/issues/77475\n        if (markerData.message && useMessage) {\n            result.push(markerData.message.replace('¦', '\\\\¦'));\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.startLineNumber !== undefined && markerData.startLineNumber !== null) {\n            result.push(markerData.startLineNumber.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.startColumn !== undefined && markerData.startColumn !== null) {\n            result.push(markerData.startColumn.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.endLineNumber !== undefined && markerData.endLineNumber !== null) {\n            result.push(markerData.endLineNumber.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        if (markerData.endColumn !== undefined && markerData.endColumn !== null) {\n            result.push(markerData.endColumn.toString());\n        }\n        else {\n            result.push(emptyString);\n        }\n        result.push(emptyString);\n        return result.join('¦');\n    }\n    IMarkerData.makeKeyOptionalMessage = makeKeyOptionalMessage;\n})(IMarkerData || (IMarkerData = {}));\nexport const IMarkerService = createDecorator('markerService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as Assert from '../../../base/common/assert.js';\nimport * as Types from '../../../base/common/types.js';\nclass RegistryImpl {\n    constructor() {\n        this.data = new Map();\n    }\n    add(id, data) {\n        Assert.ok(Types.isString(id));\n        Assert.ok(Types.isObject(data));\n        Assert.ok(!this.data.has(id), 'There is already an extension with this id');\n        this.data.set(id, data);\n    }\n    as(id) {\n        return this.data.get(id) || null;\n    }\n}\nexport const Registry = new RegistryImpl();\n"],"names":["diffSets","before","after","removed","added","element","has","push","intersection","setA","setB","result","Set","elem","add","Severity","_error","_warning","_info","fromValue","value","Error","Warning","Info","Ignore","toString","severity","__param","paramIndex","decorator","target","key","MarkerDecorationsService","constructor","modelService","_markerService","super","this","_onDidChangeMarker","_register","_markerDecorations","getModels","forEach","model","_onModelAdded","onModelAdded","onModelRemoved","_onModelRemoved","onMarkerChanged","_handleMarkerChange","dispose","clear","getMarker","uri","decoration","markerDecorations","get","changedResources","resource","_updateDecorations","MarkerDecorations","set","delete","scheme","inMemory","internal","vscode","read","map","marker","owner","remove","markers","take","update","fire","decorators","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__decorate","IModelService","_map","deltaDecorations","values","keys","oldIds","newDecorations","range","_createDecorationRange","options","_createDecorationOption","ids","removedMarker","index","getKey","id","rawMarker","ret","lift","Hint","_hasMarkerTag","setEndPosition","startLineNumber","startColumn","validateRange","isEmpty","maxColumn","getLineLastNonWhitespaceColumn","getLineMaxColumn","endColumn","word","getWordAtPosition","getStartPosition","endLineNumber","Number","MAX_VALUE","minColumn","getLineFirstNonWhitespaceColumn","className","color","zIndex","inlineClassName","minimap","undefined","position","tags","indexOf","description","stickiness","showIfCollapsed","overviewRuler","Right","tag","_util","serviceIds","Map","DI_TARGET","DI_DEPENDENCIES","getServiceDependencies","ctor","IInstantiationService","createDecorator","serviceId","storeServiceDependency","Extensions","JSONContribution","jsonContributionRegistry","_onDidChangeSchema","schemasById","registerSchema","unresolvedSchemaContent","charAt","substring","notifySchemaChanged","MarkerSeverity","IMarkerData","compare","a","b","_displayStrings","create","fromSeverity","toSeverity","emptyString","makeKeyOptionalMessage","markerData","useMessage","source","replace","code","message","join","makeKey","IMarkerService","Registry","data","as"],"sourceRoot":""}