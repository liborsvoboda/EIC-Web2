"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[7089,5041],{67032:(e,r,n)=>{function t(e,r){const n=[],t=[];for(const t of e)r.has(t)||n.push(t);for(const n of r)e.has(n)||t.push(n);return{removed:n,added:t}}function o(e,r){const n=new Set;for(const t of r)e.has(t)&&n.add(t);return n}n.d(r,{j:()=>o,q:()=>t})},87068:(e,r,n)=>{n.d(r,{Z:()=>i});var t,o=n(17416);!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t||(t={})),function(e){const r="error",n="warning",t="info";e.fromValue=function(i){return i?o.qq(r,i)?e.Error:o.qq(n,i)||o.qq("warn",i)?e.Warning:o.qq(t,i)?e.Info:e.Ignore:e.Ignore},e.toString=function(o){switch(o){case e.Error:return r;case e.Warning:return n;case e.Info:return t;default:return"ignore"}}}(t||(t={}));const i=t},1022:(e,r,n)=>{n.r(r),n.d(r,{MarkerDecorationsService:()=>p});var t=n(36156),o=n(38431),i=n(41913),s=n(58566),a=n(44411),c=n(65041),u=n(50038),d=n(5007),h=n(56709),l=n(59524),g=n(39832),m=n(67032),f=function(e,r){return function(n,t){r(n,t,e)}};let p=class extends o.JT{constructor(e,r){super(),this._markerService=r,this._onDidChangeMarker=this._register(new h.Q5),this._markerDecorations=new g.Y9,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,r){const n=this._markerDecorations.get(e);return n&&n.getMarker(r)||null}_handleMarkerChange(e){e.forEach((e=>{const r=this._markerDecorations.get(e);r&&this._updateDecorations(r)}))}_onModelAdded(e){const r=new _(e);this._markerDecorations.set(e.uri,r),this._updateDecorations(r)}_onModelRemoved(e){const r=this._markerDecorations.get(e.uri);r&&(r.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme!==d.lg.inMemory&&e.uri.scheme!==d.lg.internal&&e.uri.scheme!==d.lg.vscode||this._markerService?.read({resource:e.uri}).map((e=>e.owner)).forEach((r=>this._markerService.remove(r,[e.uri])))}_updateDecorations(e){const r=this._markerService.read({resource:e.model.uri,take:500});e.update(r)&&this._onDidChangeMarker.fire(e.model)}};p=function(e,r,n,t){var o,i=arguments.length,s=i<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,n,t);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(r,n,s):o(r,n))||s);return i>3&&s&&Object.defineProperty(r,n,s),s}([f(0,c.IModelService),f(1,t.lT)],p);class _ extends o.JT{constructor(e){super(),this.model=e,this._map=new g.YQ,this._register((0,o.OF)((()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()})))}update(e){const{added:r,removed:n}=(0,m.q)(new Set(this._map.keys()),new Set(e));if(0===r.length&&0===n.length)return!1;const t=n.map((e=>this._map.get(e))),o=r.map((e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)}))),i=this.model.deltaDecorations(t,o);for(const e of n)this._map.delete(e);for(let e=0;e<i.length;e++)this._map.set(r[e],i[e]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,r){let n=u.e.lift(r);if(r.severity!==t.ZL.Hint||this._hasMarkerTag(r,1)||this._hasMarkerTag(r,2)||(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const r=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(1===r||n.endColumn>=r)return n;const t=e.getWordAtPosition(n.getStartPosition());t&&(n=new u.e(n.startLineNumber,t.startColumn,n.endLineNumber,t.endColumn))}else if(r.endColumn===Number.MAX_VALUE&&1===r.startColumn&&n.startLineNumber===n.endLineNumber){const t=e.getLineFirstNonWhitespaceColumn(r.startLineNumber);t<n.endColumn&&(n=new u.e(n.startLineNumber,t,n.endLineNumber,n.endColumn),r.startColumn=t)}return n}_createDecorationOption(e){let r,n,o,c,u;switch(e.severity){case t.ZL.Hint:r=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",o=0;break;case t.ZL.Info:r="squiggly-info",n=(0,s.EN)(a.eS),o=10,u={color:(0,s.EN)(l.Gvr),position:1};break;case t.ZL.Warning:r="squiggly-warning",n=(0,s.EN)(a.Re),o=20,u={color:(0,s.EN)(l.Ivo),position:1};break;case t.ZL.Error:default:r="squiggly-error",n=(0,s.EN)(a.lK),o=30,u={color:(0,s.EN)(l.Gj_),position:1}}return e.tags&&(-1!==e.tags.indexOf(1)&&(c="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(c="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:r,showIfCollapsed:!0,overviewRuler:{color:n,position:i.sh.Right},minimap:u,zIndex:o,inlineClassName:c}}_hasMarkerTag(e,r){return!!e.tags&&e.tags.indexOf(r)>=0}}},65041:(e,r,n)=>{n.r(r),n.d(r,{IModelService:()=>t});const t=(0,n(44333).yh)("modelService")},44333:(e,r,n)=>{var t;n.d(r,{I8:()=>t,TG:()=>o,yh:()=>i}),function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(r){return r[e.DI_DEPENDENCIES]||[]}}(t||(t={}));const o=i("instantiationService");function i(e){if(t.serviceIds.has(e))return t.serviceIds.get(e);const r=function(e,n,o){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,r,n){r[t.DI_TARGET]===r?r[t.DI_DEPENDENCIES].push({id:e,index:n}):(r[t.DI_DEPENDENCIES]=[{id:e,index:n}],r[t.DI_TARGET]=r)}(r,e,o)};return r.toString=()=>e,t.serviceIds.set(e,r),r}},82123:(e,r,n)=>{n.d(r,{I:()=>i});var t=n(56709),o=n(6325);const i={JSONContribution:"base.contributions.json"},s=new class{constructor(){this._onDidChangeSchema=new t.Q5,this.schemasById={}}registerSchema(e,r){var n;this.schemasById[(n=e,n.length>0&&"#"===n.charAt(n.length-1)?n.substring(0,n.length-1):n)]=r,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};o.B.add(i.JSONContribution,s)},36156:(e,r,n)=>{n.d(r,{H0:()=>o,ZL:()=>t,lT:()=>c});var t,o,i=n(87068),s=n(25277),a=n(44333);!function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(t||(t={})),function(e){e.compare=function(e,r){return r-e};const r=Object.create(null);r[e.Error]=(0,s.NC)("sev.error","Error"),r[e.Warning]=(0,s.NC)("sev.warning","Warning"),r[e.Info]=(0,s.NC)("sev.info","Info"),e.toString=function(e){return r[e]||""},e.fromSeverity=function(r){switch(r){case i.Z.Error:return e.Error;case i.Z.Warning:return e.Warning;case i.Z.Info:return e.Info;case i.Z.Ignore:return e.Hint}},e.toSeverity=function(r){switch(r){case e.Error:return i.Z.Error;case e.Warning:return i.Z.Warning;case e.Info:return i.Z.Info;case e.Hint:return i.Z.Ignore}}}(t||(t={})),function(e){const r="";function n(e,n){const o=[r];return e.source?o.push(e.source.replace("¦","\\¦")):o.push(r),e.code?"string"==typeof e.code?o.push(e.code.replace("¦","\\¦")):o.push(e.code.value.replace("¦","\\¦")):o.push(r),void 0!==e.severity&&null!==e.severity?o.push(t.toString(e.severity)):o.push(r),e.message&&n?o.push(e.message.replace("¦","\\¦")):o.push(r),void 0!==e.startLineNumber&&null!==e.startLineNumber?o.push(e.startLineNumber.toString()):o.push(r),void 0!==e.startColumn&&null!==e.startColumn?o.push(e.startColumn.toString()):o.push(r),void 0!==e.endLineNumber&&null!==e.endLineNumber?o.push(e.endLineNumber.toString()):o.push(r),void 0!==e.endColumn&&null!==e.endColumn?o.push(e.endColumn.toString()):o.push(r),o.push(r),o.join("¦")}e.makeKey=function(e){return n(e,!0)},e.makeKeyOptionalMessage=n}(o||(o={}));const c=(0,a.yh)("markerService")},6325:(e,r,n)=>{n.d(r,{B:()=>i});var t=n(14527),o=n(14818);const i=new class{constructor(){this.data=new Map}add(e,r){t.ok(o.HD(e)),t.ok(o.Kn(r)),t.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,r)}as(e){return this.data.get(e)||null}}}}]);
//# sourceMappingURL=7089.js.map